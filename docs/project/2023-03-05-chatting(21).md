---
layout: default
title: "실시간 채팅방 구현(21)<br/>(RDB 지표 관찰)"
parent: 실시간 채팅서버 프로젝트
nav_order: 21
---

AWS가 제공해주는 DB 매니지먼트 툴을 사용하고자 DB만 Local에서 AWS로 이전하였습니다.

AWS RDS 그래프 지표 관찰

![img](../../../assets/img/rds/1.png)
![img](../../../assets/img/rds/2.png)
![img](../../../assets/img/rds/3.png)


* Splice 지표 설명 : [https://docs.aws.amazon.com/ko_kr/AmazonRDS/latest/AuroraUserGuide/AuroraPostgreSQL.Reference.Waitevents.html](https://docs.aws.amazon.com/ko_kr/AmazonRDS/latest/AuroraUserGuide/AuroraPostgreSQL.Reference.Waitevents.html)

* **LWLock:WALInsert**
    A process is waiting to insert write-ahead log (WAL) data into a memory buffer.

* **LWLock:WALWrite**
    A process is waiting for write-ahead log (WAL) buffers to be written to disk.



* RDS 설정 및 연결
* Amazon RDS 다중 AZ로 읽기 가능한 대기 서버 생성


### WAL(Write-ahead logging) 이란?

> Part of the **data** that a DBMS works with **is stored in RAM** and gets written to disk (or other nonvolatile storage) asynchronously, i. e., writes are postponed for some time. The more infrequently this happens the less is the input/output and the faster the system operates.
>
> But what will happen in case of failure, for example, power outage or an error in the code of the DBMS or operating system? All the contents of RAM will be lost, and only data written to disk will survive (disks are not immune to certain failures either, and only a backup copy can help if data on disk are affected). In general, it is possible to organize input/output in such a way that data on disk are always consistent, but this is complicated and not that much efficient (to my knowledge, only Firebird chose this option).
>
> Usually, and specifically in PostgreSQL, data written to **disk** appear to be **inconsistent**, and when recovering after failure, special actions are required to restore data consistency. Write-ahead logging (WAL) is just a feature that makes it possible.

* reference
    [https://www.educba.com/postgresql-wal/](https://www.educba.com/postgresql-wal/)
    
    [https://postgrespro.com/blog/pgsql/5967951](https://postgrespro.com/blog/pgsql/5967951)

### 왜 WAL 사용할까?
buffer cache alleviates the difference between the time of access to RAM (nanoseconds) and disk storage (milliseconds).




